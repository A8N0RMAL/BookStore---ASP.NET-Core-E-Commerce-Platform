@model BookStore.Models.Order

@{
    ViewData["Title"] = "Order Details";
}

<div class="container">
    <h1>Order Details</h1>

    <div class="card">
        <div class="card-body">
            <h5>Order Information</h5>
            <p><strong>Order ID:</strong> @Model.Id</p>
            <p><strong>Customer:</strong> @Model.CustomerName</p>
            <p><strong>Email:</strong> @Model.Email</p>
            <p><strong>Address:</strong> @Model.Address</p>
            <p><strong>Order Date:</strong> @Model.OrderDate.ToString("MMM dd, yyyy")</p>
            <p><strong>Status:</strong> <span class="badge bg-@GetStatusBadge(Model.Status)">@Model.Status</span></p>
        </div>
    </div>

    <div class="card mt-3">
        <div class="card-body">
            <h5>Order Items</h5>
            <table class="table">
                <thead>
                    <tr>
                        <th>Book Title</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.OrderItems)
                    {
                        <tr>
                            <td>@item.BookTitle</td>
                            <td>$@item.Price</td>
                            <td>@item.Quantity</td>
                            <td>$@(item.Price* item.Quantity)</td>
                        </tr>
                    }
                </tbody>
            </table>
            <h4 class="text-end">Total: $@Model.TotalAmount</h4>
        </div>
    </div>

    <div class="mt-3">
        <a href="/Orders" class="btn btn-secondary">Back to Orders</a>
    </div>
</div>

@functions {
    string GetStatusBadge(string status)
    {
        return status switch
        {
            "Pending" => "warning",
            "Confirmed" => "info",
            "Shipped" => "primary",
            "Delivered" => "success",
            "Cancelled" => "danger",
            _ => "secondary"
        };
    }
}